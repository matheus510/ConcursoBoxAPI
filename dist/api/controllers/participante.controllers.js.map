{"version":3,"sources":["../../../src/api/controllers/participante.controllers.js"],"names":["create","findAll","findOne","update","remove","s3","aws","S3","req","res","body","status","send","message","participanteObj","Participante","nome","cpf","cep","telefone","redesSociais","envios","save","then","data","catch","err","find","findById","params","participanteId","participante","kind","findByIdAndUpdate","new","findByIdAndRemove","name"],"mappings":"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","file":"participante.controllers.js","sourcesContent":["import Participante from '../../db/models/participante.model'\nimport aws from 'aws-sdk'\n\nlet s3 = new aws.S3()\n\nexport function create(req, res) {\n\n\t// Validate request\n\tif (!req.body) {\n\t\treturn res.status(400).send({\n\t\t\tmessage: \"participante nÃ£o pode ser vazio\"\n\t\t})\n\t}\n\t// Criar participante\n\tconst participanteObj = new Participante({\n\t\tnome: req.body.nome,\n\t\tcpf: req.body.cpf,\n\t\tcep: req.body.cep,\n\t\ttelefone: req.body.telefone,\n\t\tredesSociais: req.body.redesSociais,\n\t\tenvios: req.body.envios\n\t})\n\t// Salvar participante\n\tparticipanteObj.save()\n\t\t.then(data => {\n\t\t\tres.send(data)\n\t\t}).catch(err => {\n\t\t\tres.status(500).send({\n\t\t\t\tmessage: err.message || \"Erro ao criar o participante.\"\n\t\t\t})\n\t\t})\n}\n\nexport function findAll(req, res) {\n\t// Salvar participante\n\tParticipante.find()\n\t\t.then(data => {\n\t\t\tres.send(data)\n\t\t}).catch(err => {\n\t\t\tres.status(500).send({\n\t\t\t\tmessage: err.message || \"Erro ao criar o participante.\"\n\t\t\t})\n\t\t})\n}\n\nexport function findOne(req, res) {\n\tParticipante.findById(req.params.participanteId)\n    .then(participante => {\n        if(!participante) {\n            return res.status(404).send({\n                message: \"participante not found with id \" + req.params.participanteId\n            })            \n        }\n        res.send(participante)\n    }).catch(err => {\n        if(err.kind === 'ObjectId') {\n            return res.status(404).send({\n                message: \"participante not found with id \" + req.params.participanteId\n            })                \n        }\n        return res.status(500).send({\n            message: \"Error retrieving participante with id \" + req.params.participanteId\n        })\n    })\n}\n\nexport function update(req, res) {\n\tParticipante.findByIdAndUpdate(req.params.participanteId, req.body, {new: true})\n\t.then(participante => {\n\t\t\tif(!participante) {\n\t\t\t\t\treturn res.status(404).send({\n\t\t\t\t\t\t\tmessage: \"participante not found with id \" + req.params.participanteId\n\t\t\t\t\t})\n\t\t\t}\n\t\t\tres.send(participante)\n\t}).catch(err => {\n\t\t\tif(err.kind === 'ObjectId') {\n\t\t\t\t\treturn res.status(404).send({\n\t\t\t\t\t\t\tmessage: \"participante not found with id \" + req.params.participanteId\n\t\t\t\t\t})                \n\t\t\t}\n\t\t\treturn res.status(500).send({\n\t\t\t\t\tmessage: \"Error updating participante with id \" + req.params.participanteId\n\t\t\t})\n\t})\n}\n\nexport function remove (req, res) {\n\tParticipante.findByIdAndRemove(req.params.participanteId)\n    .then(participante => {\n        if(!participante) {\n            return res.status(404).send({\n                message: \"participante not found with id \" + req.params.participanteId\n            })\n        }\n        res.send({message: \"participante deleted successfully!\"})\n    }).catch(err => {\n        if(err.kind === 'ObjectId' || err.name === 'NotFound') {\n            return res.status(404).send({\n                message: \"participante not found with id \" + req.params.participanteId\n            })                \n        }\n        return res.status(500).send({\n            message: \"Could not delete participante with id \" + req.params.participanteId\n        })\n    })\n}\n"]}